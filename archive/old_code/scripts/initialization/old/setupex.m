function ex = setupex(frequencies, possible_amplitudes)
    % Set up the ex structure. This will be the main output data structure
    for ifreq = 1:length(frequencies)
        for iamp = 1:length(possible_amplitudes)
            ex{ifreq, iamp} = struct(...
                'frequency', frequencies(ifreq), ...
                'amplitude', possible_amplitudes(iamp), ...
                'trialnum', [], ...
                'decision', [], ...
                'stimuli_waveforms', [], ...
                'stimuli_durations', [], ...
                'stimuli_phasepattern', [], ...
                'stimuli_jitterdur', [], ...
                'electrodes', struct(...
                    'ch1', struct(...
                        'prestim_sig', {}, ...
                        'stimresp_sig', {}, ...
                        'poststimresp_sig', {}, ...
                            'prestim_runavg', {}, ...
                            'stimresp_runavg', {}, ...
                            'poststimresp_runavg', {}, ...
                        'prestim_runstd', {}, ...
                        'stimresp_runstd', {}, ...
                        'poststimresp_runstd', {}, ...
                            'prestim_runsumsq', {}, ...
                            'stimresp_runsumsq', {}, ...
                            'poststimresp_runsumsq', {}, ...
                        'prestim_N', {}, ...
                        'stimresp_N', {}, ...
                        'poststimresp_N', {}, ...
                        'FFTcalcs', struct(...
                            'prestim', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ), ...
                            'stimresp', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ), ...
                            'poststimresp', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ) ...
                        ), ...
                        'fft_ttest_verdict', [], ...
                        'fft_ttest_pval', [], ...
                        'fft_ttest_tstat', [], ...
                        'fft_ttest_df{ifft}', [], ...
                        'spectro_response', {}, ...
                        'spectro_noise', {}, ...
                        'spectro_pval', [], ...
                        'spectro_pval_trend', [] ...
                    ), ...
                    'ch2', struct(...
                        'prestim_sig', {}, ...
                        'stimresp_sig', {}, ...
                        'poststimresp_sig', {}, ...
                            'prestim_runavg', {}, ...
                            'stimresp_runavg', {}, ...
                            'poststimresp_runavg', {}, ...
                        'prestim_runstd', {}, ...
                        'stimresp_runstd', {}, ...
                        'poststimresp_runstd', {}, ...
                            'prestim_runsumsq', {}, ...
                            'stimresp_runsumsq', {}, ...
                            'poststimresp_runsumsq', {}, ...
                        'prestim_N', {}, ...
                        'stimresp_N', {}, ...
                        'poststimresp_N', {}, ...
                        'FFTcalcs', struct(...
                            'prestim', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ), ...
                            'stimresp', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ), ...
                            'poststimresp', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ) ...
                        ), ...
                        'fft_tscore', [], ...
                        'fft_pval', [], ...
                        'spectro_response', {}, ...
                        'spectro_noise', {}, ...
                        'spectro_pval', [], ...
                        'spectro_pval_trend', [] ...
                    ), ...
                    'ch3', struct(...
                        'prestim_sig', {}, ...
                        'stimresp_sig', {}, ...
                        'poststimresp_sig', {}, ...
                            'prestim_runavg', {}, ...
                            'stimresp_runavg', {}, ...
                            'poststimresp_runavg', {}, ...
                        'prestim_runstd', {}, ...
                        'stimresp_runstd', {}, ...
                        'poststimresp_runstd', {}, ...
                            'prestim_runsumsq', {}, ...
                            'stimresp_runsumsq', {}, ...
                            'poststimresp_runsumsq', {}, ...
                        'prestim_N', {}, ...
                        'stimresp_N', {}, ...
                        'poststimresp_N', {}, ...
                        'FFTcalcs', struct(...
                            'prestim', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ), ...
                            'stimresp', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ), ...
                            'poststimresp', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ) ...
                        ), ...
                        'fft_tscore', [], ...
                        'fft_pval', [], ...
                        'spectro_response', {}, ...
                        'spectro_noise', {}, ...
                        'spectro_pval', [], ...
                        'spectro_pval_trend', [] ...
                    ), ...
                    'ch4', struct(...
                        'prestim_sig', {}, ...
                        'stimresp_sig', {}, ...
                        'poststimresp_sig', {}, ...
                            'prestim_runavg', {}, ...
                            'stimresp_runavg', {}, ...
                            'poststimresp_runavg', {}, ...
                        'prestim_runstd', {}, ...
                        'stimresp_runstd', {}, ...
                        'poststimresp_runstd', {}, ...
                            'prestim_runsumsq', {}, ...
                            'stimresp_runsumsq', {}, ...
                            'poststimresp_runsumsq', {}, ...
                        'prestim_N', {}, ...
                        'stimresp_N', {}, ...
                        'poststimresp_N', {}, ...
                        'FFTcalcs', struct(...
                            'prestim', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ), ...
                            'stimresp', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ), ...
                            'poststimresp', struct(...
                                'FFT', {}, ...
                                'FFT_std', {}, ...
                                'phase', {}, ...
                                'frequencies', {} ...
                            ) ...
                        ), ...
                        'fft_tscore', [], ...
                        'fft_pval', [], ...
                        'spectro_response', {}, ...
                        'spectro_noise', {}, ...
                        'spectro_pval', [], ...
                        'spectro_pval_trend', [] ...
                    ) ...
                ) ...
            );
        end
    end
end